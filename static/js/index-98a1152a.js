import{d as w,ad as X,i as J,N as Q,r as f,bE as _,bF as W,b as s,c as Y,k as Z,f as t,w as a,h as C,u as n,aM as ee,g as c,I as b,m as te,au as oe,n as ne,bG as h,p as ae,q as ue,_ as le}from"./index-a640795e.js";import se from"./config-ef97e2e5.js";import{u as r}from"./hooks-422dd6b9.js";import{D as ie}from"./delete-69ae564f.js";import{d as ce}from"./edit-pen-3cac8a5e.js";const re=d=>(ae("data-v-a2f9bebb"),d=d(),ue(),d),de={class:"ml-[20px]"},me=re(()=>C("label",{class:"dark:text-text_color_regular"},"\u5B57\u5178\u540D\u79F0\uFF1A ",-1)),pe={class:"text-model"},fe=w({name:"Dict"}),_e=w({...fe,setup(d){const{t:m}=X(),e=J({submitLoading:!1,showEdit:!1,selectRow:null,filterName:"",tableData:[{id:1,name:"\u72B6\u6001",model:"",children:[{id:"1-1",name:"\u670D\u52A1\u72B6\u6001",model:"serviceStatus"},{id:"1-2",name:"\u5728\u7EBF\u72B6\u6001",model:"onlienStatus"}]},{id:2,name:"\u64CD\u4F5C\u7CFB\u7EDF",model:"operatingSystem"}],formData:{name:"",model:""},formItems:[{field:"name",title:"\u5B57\u5178\u540D\u79F0",span:24,itemRender:{name:"$input",props:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u540D\u79F0"}}},{field:"model",title:"\u5B57\u5178\u7C7B\u578B",span:24,itemRender:{name:"$input",props:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B",disabled:!0}}},{align:"right",span:24,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"\u63D0\u4EA4",status:"primary"}},{props:{type:"reset",content:"\u91CD\u7F6E"}}]}}]}),g=Q(e.tableData,!0),p=f(),E=f(),V=()=>{const o=_.toValueString(e.filterName).trim();if(o){const i={children:"children"},x=["name"];e.tableData=_.searchTree(g,l=>x.some(F=>_.toValueString(l[F]).indexOf(o)>-1),i),ne(()=>{p.value.setAllTreeExpand(!0)})}else e.tableData=g},y=_.debounce(function(){V()},100,{leading:!1,trailing:!0}),A=async()=>{await await h.modal.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F")==="confirm"&&h.modal.message({content:"\u6D4B\u8BD5\u6570\u636E\uFF0C\u4E0D\u53EF\u5220\u9664",status:"error"})};function B(o,i){e.selectRow=o,e.showEdit=!0,e.formItems[1].itemRender.props.disabled=i}function I(){B(null,!1)}function S(o){B(null,!1)}function T(o){e.formData={name:o.name,model:o.model?o.model:"\u6682\u65E0\u5B57\u5178\u7C7B\u578B"},B(o,!0)}const{clipboardValue:R}=W(),N=({row:o})=>{R.value=n(o).model},$=f({}),q=()=>{e.submitLoading=!0,setTimeout(()=>{const o=$.value;e.submitLoading=!1,e.showEdit=!1,e.selectRow?(h.modal.message({content:"\u4FDD\u5B58\u6210\u529F",status:"success"}),Object.assign(e.selectRow,e.formData)):(h.modal.message({content:"\u65B0\u589E\u6210\u529F",status:"success"}),o.insert(e.formData))},500)},v=f(!1);function L(o){v.value=!0}function U(){v.value=!1}function O(){p.value.setAllTreeExpand(!0)}function z(){p.value.clearTreeExpand()}function H(){E.value.reset()}return(o,i)=>{const x=s("el-input"),l=s("el-button"),F=s("el-button-group"),K=s("vxe-toolbar"),D=s("vxe-table-column"),M=s("el-tooltip"),j=s("vxe-table"),G=s("vxe-form"),P=s("vxe-modal");return Y(),Z("div",null,[t(K,{class:"bg-bg_color"},{buttons:a(()=>[C("div",de,[me,t(x,{class:"!w-[200px]",modelValue:e.filterName,"onUpdate:modelValue":i[0]||(i[0]=u=>e.filterName=u),placeholder:n(m)("buttons.hssearch"),onKeyup:ee(n(y),["prevent"]),onInput:n(y),clearable:""},null,8,["modelValue","placeholder","onKeyup","onInput"])])]),tools:a(()=>[t(F,null,{default:a(()=>[t(l,{type:"primary",icon:n(r)("fa:plus-square-o"),onClick:I},{default:a(()=>[c(b(n(m)("buttons.hsadd")),1)]),_:1},8,["icon"]),t(l,{type:"primary",icon:n(r)("fa:folder-open-o"),onClick:O},{default:a(()=>[c(b(n(m)("buttons.hsexpendAll")),1)]),_:1},8,["icon"]),t(l,{type:"primary",icon:n(r)("fa:folder-o"),onClick:z},{default:a(()=>[c(b(n(m)("buttons.hscollapseAll")),1)]),_:1},8,["icon"])]),_:1})]),_:1}),t(j,{ref_key:"xTree",ref:p,border:"",resizable:"","tree-config":{children:"children",iconOpen:"fa fa-minus-square-o",iconClose:"fa fa-plus-square-o"},data:e.tableData,onCellDblclick:N},{default:a(()=>[t(D,{"tree-node":"",field:"name",title:"\u5B57\u5178\u540D\u79F0"}),t(D,{title:"\u5B57\u5178\u7C7B\u578B"},{default:a(({row:u})=>[t(M,{effect:"dark",content:"\u53CC\u51FB\u590D\u5236\uFF1A"+u.model,placement:"right"},{default:a(()=>[C("span",pe,b(u.model),1)]),_:2},1032,["content"])]),_:1}),t(D,{title:"\u64CD\u4F5C",width:"360",fixed:"right"},{default:a(({row:u})=>[t(l,{link:"",type:"primary",icon:n(r)(n(ce)),onClick:k=>T(u)},{default:a(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["icon","onClick"]),t(l,{link:"",type:"primary",icon:n(r)("fa:plus-square-o"),onClick:k=>S(u)},{default:a(()=>[c(" \u65B0\u589E\u5B50\u7C7B\u578B ")]),_:2},1032,["icon","onClick"]),te(t(l,{link:"",type:"primary",icon:n(r)("fa:cog"),onClick:k=>L(u)},{default:a(()=>[c(" \u5B57\u5178\u914D\u7F6E ")]),_:2},1032,["icon","onClick"]),[[oe,u.model]]),t(l,{link:"",type:"primary",icon:n(r)(n(ie)),onClick:A},{default:a(()=>[c(" \u5220\u9664 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["data"]),t(P,{resize:"",width:"450",modelValue:e.showEdit,"onUpdate:modelValue":i[1]||(i[1]=u=>e.showEdit=u),title:e.selectRow?"\u7F16\u8F91":"\u65B0\u589E",loading:e.submitLoading,onHide:H},{default:a(()=>[t(G,{ref_key:"xForm",ref:E,data:e.formData,items:e.formItems,"title-align":"right","title-width":"100",onSubmit:q},null,8,["data","items"])]),_:1},8,["modelValue","title","loading"]),t(se,{drawer:v.value,drawTitle:"\u5B57\u5178\u5217\u8868",onHandleClose:U},null,8,["drawer"])])}}});const Fe=le(_e,[["__scopeId","data-v-a2f9bebb"]]);export{Fe as default};
