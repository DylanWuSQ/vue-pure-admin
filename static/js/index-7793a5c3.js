import{d as ie,r as w,aL as q,s as l,aM as Te,c as z,k as R,u as e,ar as M,az as ne,aN as W,aG as oe,h as L,n as Ce,aO as Me,aP as ke,al as Ee}from"./index-ab9e3548.js";const xe=()=>{window.cancelAnimationFrame=(()=>window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(u){return window.clearTimeout(u)})(),window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(u){return window.setTimeout(u,1e3/60)}}()},Oe=(u,m)=>{if(u===m)return!0;if(u.length!==m.length)return!1;for(let r=0;r<u.length;++r)if(u[r]!==m[r])return!1;return!0};function se(){Array.isArray||(Array.isArray=function(g){return Object.prototype.toString.call(g)==="[object Array]"});let u,m,r,c,S,C,t=1,n=arguments[0]||{},f=!1,b=arguments.length;if(typeof n=="boolean"&&(f=n,n=arguments[1]||{},t++),typeof n!="object"&&typeof n!="function"&&(n={}),t===b)return n;for(;t<b;t++)if((m=arguments[t])!=null)for(u in m)r=n[u],c=m[u],S=Array.isArray(c),f&&c&&(typeof c=="object"||S)?(S?(S=!1,C=r&&Array.isArray(r)?r:[]):C=r&&typeof r=="object"?r:{},n[u]=se(f,C,c)):c!==void 0&&(n[u]=c);return n}const Be=Object.freeze(Object.defineProperty({__proto__:null,animationFrame:xe,arrayEqual:Oe,copyObj:se},Symbol.toStringTag,{value:"Module"})),De=["innerHTML"],Pe=ie({name:"ReSeamlessScroll"}),$e=ie({...Pe,props:{data:{type:Array},classOption:{type:Object}},emits:["scrollEnd"],setup(u,{expose:m,emit:r}){const c=u,{animationFrame:S,copyObj:C}=Be;S();const t=w(0),n=w(0),f=w(0),b=w(0),g=w(0),F=w(0),k=w(0),E=w("");let y=null,N=null,x=null,Y=null,I=null,O=!1,B="ease-in";const{classOption:h}=c;h.key===void 0&&(h.key=0);const U=q(`wrap${h.key}`,null),X=q(`slotList${h.key}`,null),V=q(`realBox${h.key}`,null),G=l(()=>e(t)<0),J=l(()=>Math.abs(e(t))<e(F)-e(g)),le=l(()=>({step:1,limitMoveNum:5,hoverStop:!0,direction:"top",openTouch:!0,singleHeight:0,singleWidth:0,waitTime:1e3,switchOffset:30,autoPlay:!0,navigation:!1,switchSingleStep:134,switchDelay:400,switchDisabledClass:"disabled",isSingleRemUnit:!1})),i=l(()=>C({},e(le),h)),ae=l(()=>e(G)?"":e(i).switchDisabledClass),re=l(()=>e(J)?"":e(i).switchDisabledClass),ue=l(()=>({position:"absolute",margin:`${e(b)/2}px 0 0 -${e(i).switchOffset}px`,transform:"translate(-100%,-50%)"})),ce=l(()=>({position:"absolute",margin:`${e(b)/2}px 0 0 ${e(g)+e(i).switchOffset}px`,transform:"translateY(-50%)"})),D=l(()=>e(i).direction!=="bottom"&&e(i).direction!=="top"),K=l(()=>e(D)?{float:"left",overflow:"hidden"}:{overflow:"hidden"}),fe=l(()=>({transform:`translate(${e(t)}px,${e(n)}px)`,transition:`all ${B} ${e(f)}ms`,overflow:"hidden"})),P=l(()=>e(i).navigation),$=l(()=>e(P)?!1:e(i).autoPlay),Q=l(()=>c.data.length>=e(i).limitMoveNum),Z=l(()=>e(i).hoverStop&&e($)&&e(Q)),H=l(()=>e(i).openTouch),ee=l(()=>e(i).isSingleRemUnit?parseInt(window.getComputedStyle(document.documentElement,null).fontSize):1),_=l(()=>e(i).singleWidth*e(ee)),j=l(()=>e(i).singleHeight*e(ee)),p=l(()=>{let o;const s=e(i).step;if(e(D)?o=e(_):o=e(j),o>0&&o%s>0)throw"\u5982\u679C\u8BBE\u7F6E\u4E86\u5355\u6B65\u6EDA\u52A8\uFF0Cstep\u9700\u662F\u5355\u6B65\u5927\u5C0F\u7684\u7EA6\u6570\uFF0C\u5426\u5219\u65E0\u6CD5\u4FDD\u8BC1\u5355\u6B65\u6EDA\u52A8\u7ED3\u675F\u7684\u4F4D\u7F6E\u662F\u5426\u51C6\u786E";return s});function me(){t.value=0,n.value=0,A(),te()}function he(){if(!!e(G)){if(Math.abs(e(t))<e(i).switchSingleStep){t.value=0;return}t.value+=e(i).switchSingleStep}}function de(){if(!!e(J)){if(e(F)-e(g)+e(t)<e(i).switchSingleStep){t.value=e(g)-e(F);return}t.value-=e(i).switchSingleStep}}function A(){cancelAnimationFrame(N||"")}function pe(o){if(!e(H))return;let s;const a=o.targetTouches[0],{waitTime:d,singleHeight:T,singleWidth:Ae}=e(i);x={x:a.pageX,y:a.pageY},Y=e(n),I=e(t),!!T&&!!Ae?(s&&clearTimeout(s),s=setTimeout(()=>{A()},d+20)):A()}function ve(o){if(!e(H)||o.targetTouches.length>1||o.scale&&o.scale!==1)return;const s=o.targetTouches[0],{direction:a}=e(i),d={x:s.pageX-x.x,y:s.pageY-x.y};o.preventDefault();const T=Math.abs(d.x)<Math.abs(d.y)?1:0;T===1&&a==="bottom"||T===1&&a==="top"?n.value=Y+d.y:(T===0&&a==="left"||T===0&&a==="right")&&(t.value=I+d.x)}function we(){if(!e(H))return;let o;const s=e(i).direction;if(f.value=50,s==="top")e(n)>0&&(n.value=0);else if(s==="bottom"){const a=e(k)/2*-1;e(n)<a&&(n.value=a)}else if(s==="left")e(t)>0&&(t.value=0);else if(s==="right"){const a=e(F)*-1;e(t)<a&&(t.value=a)}o&&clearTimeout(o),o=setTimeout(()=>{f.value=0,v()},e(f))}function ge(){e(Z)&&be()}function ye(){e(Z)&&Se()}function v(){O||(N=requestAnimationFrame(function(){const o=e(k)/2,s=e(F)/2,{direction:a,waitTime:d}=e(i);a==="top"?(Math.abs(e(n))>=o&&(r("scrollEnd"),n.value=0),n.value-=p.value):a==="bottom"?(e(n)>=0&&(r("scrollEnd"),n.value=o*-1),n.value+=p.value):a==="left"?(Math.abs(e(t))>=s&&(r("scrollEnd"),t.value=0),t.value-=p.value):a==="right"&&(e(t)>=0&&(r("scrollEnd"),t.value=s*-1),t.value+=p.value),y&&clearTimeout(y),e(j)?Math.abs(e(n))%e(j)<e(p)?y=setTimeout(()=>{v()},d):v():e(_)&&Math.abs(e(t))%e(_)<e(p)?y=setTimeout(()=>{v()},d):v()}))}function te(){Ce(()=>{const{switchDelay:o}=e(i);if(E.value="",e(D)){b.value=e(U).offsetHeight,g.value=e(U).offsetWidth;let s=e(X).offsetWidth;e($)&&(s=s*2+1),e(V).style.width=s+"px",F.value=s}if(e($))B="ease-in",f.value=0;else{B="linear",f.value=o;return}e(Q)?(E.value=e(X).innerHTML,setTimeout(()=>{var s;k.value=(s=e(V))==null?void 0:s.offsetHeight,v()},0)):(A(),n.value=t.value=0)})}function Se(){O=!1,v()}function be(){O=!0,y&&clearTimeout(y),A()}function Fe(o){e(i).direction==="left"||e(i).direction==="right"||Me(()=>{o.deltaY>0?n.value-=p.value:n.value+=p.value},50)()}return Te(()=>{te()}),ke(()=>{A(),clearTimeout(y)}),m({reset:me}),(o,s)=>(z(),R("div",{ref:"wrap"+e(h).key},[e(P)?(z(),R("div",{key:0,style:M(e(ue)),class:ne(e(ae)),onClick:he},[W(o.$slots,"left-switch")],6)):oe("",!0),e(P)?(z(),R("div",{key:1,style:M(e(ce)),class:ne(e(re)),onClick:de},[W(o.$slots,"right-switch")],6)):oe("",!0),L("div",{ref:"realBox"+e(h).key,style:M(e(fe)),onMouseenter:ge,onMouseleave:ye,onTouchstartPassive:pe,onTouchmovePassive:ve,onTouchend:we,onMousewheelPassive:Fe},[L("div",{ref:"slotList"+e(h).key,style:M(e(K))},[W(o.$slots,"default")],4),L("div",{innerHTML:E.value,style:M(e(K))},null,12,De)],36)],512))}}),He=Ee($e),je=He;export{je as S};
