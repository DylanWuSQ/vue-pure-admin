import{d as w,a4 as P,i as X,G as Q,r as f,bA as _,bB as W,b as s,c as Y,k as Z,f as t,w as n,h as D,u as a,aJ as ee,g as c,z as b,m as te,am as oe,n as ne,bC as h,p as ae,q as le,_ as ue}from"./index-aae7791f.js";import se from"./config-c74b3880.js";import{u as r}from"./hooks-580d736a.js";const ie=d=>(ae("data-v-bdc53495"),d=d(),le(),d),ce={class:"ml-[20px]"},re=ie(()=>D("label",{class:"dark:text-text_color_regular"},"\u5B57\u5178\u540D\u79F0\uFF1A ",-1)),de={class:"text-model"},me=w({name:"Dict"}),pe=w({...me,setup(d){const{t:m}=P(),e=X({submitLoading:!1,showEdit:!1,selectRow:null,filterName:"",tableData:[{id:1,name:"\u72B6\u6001",model:"",children:[{id:"1-1",name:"\u670D\u52A1\u72B6\u6001",model:"serviceStatus"},{id:"1-2",name:"\u5728\u7EBF\u72B6\u6001",model:"onlienStatus"}]},{id:2,name:"\u64CD\u4F5C\u7CFB\u7EDF",model:"operatingSystem"}],formData:{name:"",model:""},formItems:[{field:"name",title:"\u5B57\u5178\u540D\u79F0",span:24,itemRender:{name:"$input",props:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u540D\u79F0"}}},{field:"model",title:"\u5B57\u5178\u7C7B\u578B",span:24,itemRender:{name:"$input",props:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B",disabled:!0}}},{align:"right",span:24,itemRender:{name:"$buttons",children:[{props:{type:"submit",content:"\u63D0\u4EA4",status:"primary"}},{props:{type:"reset",content:"\u91CD\u7F6E"}}]}}]}),g=Q(e.tableData,!0),p=f(),E=f(),A=()=>{const o=_.toValueString(e.filterName).trim();if(o){const i={children:"children"},x=["name"];e.tableData=_.searchTree(g,u=>x.some(F=>_.toValueString(u[F]).indexOf(o)>-1),i),ne(()=>{p.value.setAllTreeExpand(!0)})}else e.tableData=g},y=_.debounce(function(){A()},100,{leading:!1,trailing:!0}),V=async()=>{await await h.modal.confirm("\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F")==="confirm"&&h.modal.message({content:"\u6D4B\u8BD5\u6570\u636E\uFF0C\u4E0D\u53EF\u5220\u9664",status:"error"})};function B(o,i){e.selectRow=o,e.showEdit=!0,e.formItems[1].itemRender.props.disabled=i}function S(){B(null,!1)}function T(o){B(null,!1)}function I(o){e.formData={name:o.name,model:o.model?o.model:"\u6682\u65E0\u5B57\u5178\u7C7B\u578B"},B(o,!0)}const{clipboardValue:R}=W(),$=({row:o})=>{R.value=a(o).model},N=f({}),q=()=>{e.submitLoading=!0,setTimeout(()=>{const o=N.value;e.submitLoading=!1,e.showEdit=!1,e.selectRow?(h.modal.message({content:"\u4FDD\u5B58\u6210\u529F",status:"success"}),Object.assign(e.selectRow,e.formData)):(h.modal.message({content:"\u65B0\u589E\u6210\u529F",status:"success"}),o.insert(e.formData))},500)},v=f(!1);function L(o){v.value=!0}function U(){v.value=!1}function z(){p.value.setAllTreeExpand(!0)}function O(){p.value.clearTreeExpand()}function H(){E.value.reset()}return(o,i)=>{const x=s("el-input"),u=s("el-button"),F=s("el-button-group"),K=s("vxe-toolbar"),C=s("vxe-table-column"),j=s("el-tooltip"),G=s("vxe-table"),J=s("vxe-form"),M=s("vxe-modal");return Y(),Z("div",null,[t(K,{class:"bg-bg_color"},{buttons:n(()=>[D("div",ce,[re,t(x,{class:"!w-[200px]",modelValue:e.filterName,"onUpdate:modelValue":i[0]||(i[0]=l=>e.filterName=l),placeholder:a(m)("buttons.hssearch"),onKeyup:ee(a(y),["prevent"]),onInput:a(y),clearable:""},null,8,["modelValue","placeholder","onKeyup","onInput"])])]),tools:n(()=>[t(F,null,{default:n(()=>[t(u,{type:"primary",icon:a(r)("fa:plus-square-o"),onClick:S},{default:n(()=>[c(b(a(m)("buttons.hsadd")),1)]),_:1},8,["icon"]),t(u,{type:"primary",icon:a(r)("fa:folder-open-o"),onClick:z},{default:n(()=>[c(b(a(m)("buttons.hsexpendAll")),1)]),_:1},8,["icon"]),t(u,{type:"primary",icon:a(r)("fa:folder-o"),onClick:O},{default:n(()=>[c(b(a(m)("buttons.hscollapseAll")),1)]),_:1},8,["icon"])]),_:1})]),_:1}),t(G,{ref_key:"xTree",ref:p,border:"",resizable:"","tree-config":{children:"children",iconOpen:"fa fa-minus-square-o",iconClose:"fa fa-plus-square-o"},data:e.tableData,onCellDblclick:$},{default:n(()=>[t(C,{"tree-node":"",field:"name",title:"\u5B57\u5178\u540D\u79F0"}),t(C,{title:"\u5B57\u5178\u7C7B\u578B"},{default:n(({row:l})=>[t(j,{effect:"dark",content:"\u53CC\u51FB\u590D\u5236\uFF1A"+l.model,placement:"right"},{default:n(()=>[D("span",de,b(l.model),1)]),_:2},1032,["content"])]),_:1}),t(C,{title:"\u64CD\u4F5C",width:"360",fixed:"right"},{default:n(({row:l})=>[t(u,{link:"",type:"primary",icon:a(r)("edits"),onClick:k=>I(l)},{default:n(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["icon","onClick"]),t(u,{link:"",type:"primary",icon:a(r)("fa:plus-square-o"),onClick:k=>T(l)},{default:n(()=>[c(" \u65B0\u589E\u5B50\u7C7B\u578B ")]),_:2},1032,["icon","onClick"]),te(t(u,{link:"",type:"primary",icon:a(r)("fa:cog"),onClick:k=>L(l)},{default:n(()=>[c(" \u5B57\u5178\u914D\u7F6E ")]),_:2},1032,["icon","onClick"]),[[oe,l.model]]),t(u,{link:"",type:"primary",icon:a(r)("delete"),onClick:V},{default:n(()=>[c(" \u5220\u9664 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["data"]),t(M,{resize:"",width:"450",modelValue:e.showEdit,"onUpdate:modelValue":i[1]||(i[1]=l=>e.showEdit=l),title:e.selectRow?"\u7F16\u8F91":"\u65B0\u589E",loading:e.submitLoading,onHide:H},{default:n(()=>[t(J,{ref_key:"xForm",ref:E,data:e.formData,items:e.formItems,"title-align":"right","title-width":"100",onSubmit:q},null,8,["data","items"])]),_:1},8,["modelValue","title","loading"]),t(se,{drawer:v.value,drawTitle:"\u5B57\u5178\u5217\u8868",onHandleClose:U},null,8,["drawer"])])}}});const he=ue(pe,[["__scopeId","data-v-bdc53495"]]);export{he as default};
